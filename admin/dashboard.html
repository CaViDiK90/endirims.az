<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

<div class="header">
  <h1>Dashboard</h1>
  <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</p>
  <button onclick="logout()">–í—ã–π—Ç–∏</button>
</div>

<hr style="margin:20px 0">

<h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>

<h4>–¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–π</h4>
<div id="topCategories"></div>

<h4>–¢–æ–ø –∫–æ–ª–ª–µ–∫—Ü–∏–π</h4>
<div id="topCollections"></div>

<canvas id="clickChart" width="320" height="160"></canvas>

<div class="container">

  <!-- ADD CATEGORY -->
  <h3>‚ûï –ö–∞—Ç–µ–≥–æ—Ä–∏—è</h3>
  <input id="cat_title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" style="width:100%;padding:10px">
  <input id="cat_desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" style="width:100%;padding:10px;margin-top:6px">
  <input id="cat_emoji" placeholder="–≠–º–æ–¥–∑–∏ (üëó)" style="width:100%;padding:10px;margin-top:6px">
  <input id="cat_logo" placeholder="–õ–æ–≥–æ (trendyol)" style="width:100%;padding:10px;margin-top:6px">
  <!-- <button onclick="addCategory()" style="width:100%;padding:12px;margin-top:8px">
    –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
  </button> -->
  <button id="saveCategoryBtn"
        onclick="saveCategory()"
        style="width:100%;padding:12px;margin-top:8px">
  –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
</button>

  <hr style="margin:20px 0">

  <!-- ADD COLLECTION -->
  <h3>‚ûï –ö–æ–ª–ª–µ–∫—Ü–∏—è</h3>
  <select id="collectionCategorySelect" style="width:100%;padding:10px"></select>
  <input id="col_title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" style="width:100%;padding:10px;margin-top:6px">
  <input id="col_desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" style="width:100%;padding:10px;margin-top:6px">
  <input id="col_url" placeholder="Trendyol URL" style="width:100%;padding:10px;margin-top:6px">
 <button id="saveCollectionBtn"
        onclick="saveCollection()"
        style="width:100%;padding:12px;margin-top:8px">
  –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é
</button>

  <hr style="margin:20px 0">

  <!-- CATEGORY LIST -->
  <h3>üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
  <div id="categoryList"></div>

  <hr style="margin:20px 0">

  <!-- COLLECTION LIST -->
  <h3>üì¶ –ö–æ–ª–ª–µ–∫—Ü–∏–∏</h3>
  <div id="collectionList"></div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="../js/supabase.js"></script>
<script src="admin.js"></script>

<script>
  async function initDashboard() {
    checkAuth();
    await loadCategories();        
    renderCategoryList();         
    renderCollectionList();        
    loadStats();                   
  }

  initDashboard();
</script>



</body>
</html>
